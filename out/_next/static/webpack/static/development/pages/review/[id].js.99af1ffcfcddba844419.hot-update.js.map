{"version":3,"file":"static/webpack/static\\development\\pages\\review\\[id].js.99af1ffcfcddba844419.hot-update.js","sources":["webpack:///./pages/review/.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { confirmAlert } from 'react-confirm-alert';\nimport Link from 'next/link';\nimport * as toastr from 'toastr';\nimport 'react-confirm-alert/src/react-confirm-alert.css';\nimport {FacebookShareButton, TwitterShareButton,  WhatsappShareButton} from \"react-share\";\nimport ReviewServices from '../../services/ReviewServices';\nimport InfluencerServices from '../../services/InfluencerServices';\nimport UserContext from '../../components/contexts/UserContext';\nimport ReviewUpdate from '../../components/reviews/ReviewUpdate';\nimport CartBubble from '../../components/cart/CartBubble';\nimport Votes from '../../components/votes/Votes';\nimport InfluencerCard from '../../components/influencer/InfluencerCard';\nimport SurvivalKit from '../../components/survivalKit/SurvivalKit';\nimport KitServices from '../../services/KitServices'\n\nclass ReviewOne extends Component {\n  \n  state = {\n    influencers: [],\n    review: {},\n    kit: {},\n    disableVoteButtons: false,\n    update: false,\n  }\n\n  static contextType = UserContext;\n\n\n  static getInitialProps({ query: { id } }) {\n    return { id };\n  }\n\n\n  componentDidMount() {\n    this.fetchInfluencer();\n\n    const { id } = this.props;\n\n    ReviewServices.getReview(id)\n      .then((review) => {\n        this.setState({\n          review: review\n        })\n      })\n      .catch(() => toastr.error('Error occured while fetching. Please try later.'));\n      \n      this.getkit(id)\n  }\n\n  getkit = (id) => {\n    KitServices.getKit(id)\n      .then((kit) => {\n          this.setState({\n              kit: kit\n          })\n      })\n      .catch(() => toastr.error('Error occured while fetching. Please try later.'));\n  }\n\n\n\n  fetchInfluencer = () => {\n    InfluencerServices.getAll()\n      .then(influencers => this.setState({\n        ...this.state,\n        influencers\n      }))\n      .catch((err) => console.log(err))\n  }\n  \n  update = () => {\n    this.setState({\n      update: true\n    })\n  }\n\n\n  upvote = () => {\n    if (!this.context.islogged) {\n      return toastr.info('You must be logged in to leave vote.');\n    }\n\n    if (!this.state.disableVoteButtons) {\n      this.setState({ disableVoteButtons: true });\n      if (this.isUpvoted()) {\n        ReviewServices.undoVoteUp(this.state.review.influencer._id, this.context.user._id)\n          .then(() => {\n            this.setState(state => {\n              const upvotes = state.review.upvotes.filter(upvote => upvote.author !== this.context.user._id);\n\n              return {\n                review: { ...state.review, upvotes },\n                disableVoteButtons: false\n              }\n            });\n          })\n          .catch(() => {\n            toastr.error('Internal server error');\n            this.setState({ disableVoteButtons: false });\n          });\n      } else {\n        ReviewServices.voteUp(this.state.review.influencer._id, this.context.user._id)\n          .then(() => {\n            this.setState(state => {\n              const downvotes = state.review.downvotes.filter(downvote => downvote.author !== this.context.user._id);\n              const upvotes = state.review.upvotes\n                .filter(upvote => upvote.author !== this.context.user._id)\n                .concat({ author: this.context.user._id });\n\n              return {\n                review: { ...state.review, downvotes, upvotes },\n                disableVoteButtons: false,\n                upvoted: true\n              }\n            });\n          })\n          .catch(() => {\n            toastr.error('Internal server error');\n            this.setState({ disableVoteButtons: false });\n          });\n      }\n    }\n  }\n\n  downvote = () => {\n    if (!this.context.islogged) {\n      return toastr.info('You must be logged in to leave vote.');\n    }\n\n    if (!this.state.disableVoteButtons) {\n      this.setState({ disableVoteButtons: true });\n      if (this.isDownvoted()) {\n        ReviewServices.undoVoteDown(this.state.review.influencer._id, this.context.user._id)\n          .then(() => {\n            this.setState(state => {\n              const downvotes = state.review.downvotes.filter(downvote => downvote.author !== this.context.user._id);\n\n              return {\n                review: { ...state.review, downvotes },\n                disableVoteButtons: false\n              }\n            });\n          })\n          .catch(() => {\n            toastr.error('Internal server error');\n            this.setState({ disableVoteButtons: false });\n          });\n      } else {\n        ReviewServices.voteDown(this.state.review.influencer._id, this.context.user._id)\n          .then(() => {\n            this.setState(state => {\n              const upvotes = state.review.upvotes.filter(upvote => upvote.author !== this.context.user._id);\n              const downvotes = state.review.downvotes\n                .filter(downvote => downvote.author !== this.context.user._id)\n                .concat({ author: this.context.user._id });\n\n              return {\n                review: { ...state.review, downvotes, upvotes },\n                disableVoteButtons: false\n              }\n            });\n          })\n          .catch(() => {\n            toastr.error('Internal server error');\n            this.setState({ disableVoteButtons: false });\n          });\n      }\n    }\n  }\n\n\n  isDownvoted = () => this.state.review.downvotes && this.state.review.downvotes.find(vote => vote.author === this.context.user._id);\n\n  isUpvoted = () => this.state.review.upvotes && this.state.review.upvotes.find(vote => vote.author === this.context.user._id);\n\n  votes = () => {\n    if (this.state.review.upvotes && this.state.review.downvotes) {\n      return this.state.review.upvotes.length - this.state.review.downvotes.length;\n    } else {\n      return 0;\n    }\n  };\n\n  audioDraw = () => {\n    const {review} = this.state;\n\n    if (this.state.review.voicenote === \"\") {\n      return(\n        <div></div>\n      )\n    } else {\n      return(\n        <div>\n            <audio ref=\"audio_tag\" src={review.voicenote} controls/>\n        </div>\n      )\n    };\n  };\n\n  // instagramRedirect = () => {\n  //   return(\n  //     <div>\n  //       <Link href=\"instagram.com/kingjames\"></Link>\n  //     </div>\n  //   )\n  // }\n\n  videoDraw = () => {\n\n    if (this.state.review.video === \"\") {\n      return(\n        <div></div>\n      )\n    } else {\n      return(\n        <div>\n            {/* <video className=\"video\" controls src={review.video} /> */}\n          <iframe src={'https://www.youtube.com/embed/E7wJTI-1dvQ'}\n            frameBorder='0'\n            allow='autoplay; encrypted-media'\n            allowFullScreen\n            title='video'\n            className='video-youtube' \n          />\n        </div>\n      )\n    };\n  };\n\n\n\n  render() {\n    console.log(this.props.id)\n    const review = this.state.review || {};\n    const influencer = this.state.review.influencer || {};\n    const influencers = this.state.influencers;\n    const kit = this.state.kit;\n\n    if(this.state.kit === {} || this.state.kit === undefined || this.state.review.influencer === undefined){\n      return(\n        <div>\n          <p>Loadingg........</p>\n        </div>\n      )\n    } else {\n        return (\n\n        <div style={{height:\"350vh\"}} className=\"review-outer-page\">\n          <div className=\"review-page\">\n            <div>\n              <div className=\"review-heading-div\">\n                <img src={influencer.profilePic} alt=\"Expert Image\" className=\"influencer-pic\" />\n                <p className=\"heading\" >{review.title}</p>\n              </div>\n              <div className=\"subheading\">\n                <div className=\"category-name\">\n                  <p className=\"author\">{influencer.name && influencer.name.firstName + ' ' + influencer.name.lastName}</p>\n                  {/* <div className=\"category-card\">\n                    <img src=\"https://res.cloudinary.com/dpt8pbi8n/image/upload/v1567710375/icons8-comedy-100_1.png\" alt=\"the product\" className=\"icon\"/>\n                    <span className=\"photography\">{influencer.expertise}</span>\n                  </div> */}\n        \n              <span id=\"category-bubble-review\">Athlete</span>\n                  \n                </div>\n                <div className=\"profile-instagram\">\n                  <p className=\"profile-name\">{influencer.name && influencer.name.firstName}'s profile</p>\n                  <img  className=\"instagram\" src=\"https://res.cloudinary.com/dpt8pbi8n/image/upload/v1565290822/instagram.svg\" alt=\"instagram\"/>\n                </div>\n              </div>\n                <div>\n                  {this.videoDraw()}\n                </div>\n          </div>\n\n          <div>\n            <div className=\"survival-kit-section\">\n            <h5>Few words about {influencer.name && influencer.name.firstName}</h5>\n              <p>\n               {influencer.description}\n                </p>\n                <div className=\"books-section\">\n                 <h2>BOOKS</h2>\n                 <div className=\"book-container\">\n                   <div className=\"book-card\">\n                     <img height=\"auto\" width=\"100%\" src=\"https://prodimage.images-bn.com/pimages/9780802125088_p0_v6_s550x406.jpg\" alt=\"Book\" />\n                     {/* <p><b>The Happiness Hypothesis: Jonathan Haidt</b></p> */}\n                     <button className=\"book-button add-to-cart\"><b>Buy on Amazon</b></button>\n                   </div>\n                   {/* <div className=\"book-card\">\n                     <img height=\"150\" width=\"auto\" src=\"https://prodimage.images-bn.com/pimages/9780802125088_p0_v6_s550x406.jpg\" alt=\"Book\" />\n                     <p><b>Title of Book</b></p>\n                     <button className=\"book-button add-to-cart\"><b>Buy on Amazon</b></button>\n                   </div>\n                   <div className=\"book-card\">\n                     <img height=\"150\" width=\"auto\" src=\"https://prodimage.images-bn.com/pimages/9780802125088_p0_v6_s550x406.jpg\" alt=\"Book\" />\n                     <p><b>Title of Book fwefwe </b></p>\n                     <button className=\"book-button add-to-cart\"><b>Buy on Amazon</b></button>\n                   </div>\n                   <div className=\"book-card\">\n                     <img height=\"150\" width=\"auto\" src=\"https://prodimage.images-bn.com/pimages/9780802125088_p0_v6_s550x406.jpg\" alt=\"Book\" />\n                     <p><b>Title of Book www  wef</b></p>\n                     <button className=\"book-button add-to-cart\"><b>Buy on Amazon</b></button>\n                   </div> */}\n   \n                   \n                 </div>\n              </div>\n              <section className=\"survival-habits-heading\">\n                <button className=\"clicked-show\">SURVIVAL KITS</button>\n              </section>\n              \n              {/* <div> */}\n                <SurvivalKit id={influencer._id}></SurvivalKit>\n              {/* </div> */}\n                \n            </div>\n            {this.audioDraw()}\n            <div className=\"bottom-review-container\">\n              <Votes\n                isDownvoted={this.isDownvoted()}\n                isUpvoted={this.isUpvoted()}\n                votes={this.votes()}\n                voteDown={this.downvote}\n                voteUp={this.upvote}\n              />\n              <div className=\"share-buttons\">\n                <span className=\"share-text\">SHARE</span>\n                <WhatsappShareButton url={\"zapos.com\"}><img className=\"instagram\" src=\"https://res.cloudinary.com/dpt8pbi8n/image/upload/v1565290822/instagram.svg\" alt=\"instagram button\"/></WhatsappShareButton>\n                <FacebookShareButton url={\"headspace.com\"}><img className=\"instagram\" src=\"https://res.cloudinary.com/dpt8pbi8n/image/upload/v1566411204/facebook.svg\" alt=\"facebook button\"/></FacebookShareButton>\n                <TwitterShareButton url={\"amazon.com\"}><img className=\"instagram\" src=\"https://res.cloudinary.com/dpt8pbi8n/image/upload/v1566411510/twitter.svg\" alt=\"twitter button\"/></TwitterShareButton>\n              </div>\n              </div>\n              </div>\n              {/* <CartBubble product={product}/> */}\n            </div>\n            <div className=\"expert-card-section-review\">\n            <div className=\"div-review-cards\">\n            <h2><b>Similar Sages</b></h2>\n            </div>\n            <div className=\"cards-review\">\n            {influencers.map((i, index) => {\n              return (\n                <InfluencerCard review=\"yes\" i={i} index={index} />\n              )\n            })}\n            </div>\n          </div>\n          </div>\n      );\n      } \n      }\n}\n\nexport default ReviewOne;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AALA;AACA;AAHA;AAmCA;AAEA;AACA;AADA;AAGA;AAEA;AACA;AA3CA;AA+CA;AAGA;AAFA;AAKA;AACA;AAtDA;AAwDA;AACA;AADA;AAGA;AACA;AA5DA;AA+DA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAEA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAFA;AAIA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAHA;AAKA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AA5GA;AA8GA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AAEA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AAFA;AAIA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAAA;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAFA;AAIA;AACA;AAEA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AA1JA;AACA;AADA;AACA;AADA;AAiKA;AACA;AACA;AACA;AACA;AACA;AACA;AAvKA;AAyKA;AAAA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AADA;AACA;AACA;AAvLA;AAkMA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AALA;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","sourceRoot":""}