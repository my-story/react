{"version":3,"file":"static/webpack/static/development/pages/review/[id].js.0f2945eb1d1486b9bbe6.hot-update.js","sources":["webpack:///./components/survivalKit/ProductKit.js"],"sourcesContent":["import React, { Component } from 'react';\nimport * as toastr from 'toastr';\n\nimport AuthServices from '../../services/AuthServices';\nimport KitServices from '../../services/KitServices';\nimport UserContext from '../../components/contexts/UserContext';\n\nclass ProductKit extends Component {\n    state = {\n        size: \"150px\",\n        product:{},\n        products: [],\n        kit: \"\"\n    }\n\n    static contextType = UserContext;\n    \n    componentDidMount() {\n        const id  = this.props.p._id;\n        KitServices.getProductSurvival(id)\n          .then((product) => this.setState({product}))\n          .catch(err => console.log(err))\n    };\n\n    openCard = () => {\n        let newSize = this.state.size === '150px' ? '300px' : '150px';\n        this.setState({ size: newSize });\n    };\n\n    shrinkParagraph = (p) => {\n        // const {kit} = this.state;\n        const length = p.length;\n    \n        if (this.state.size === \"150px\") {\n            if (length > 100){\n                return(\n                    <p>{p.substring(0,100)} ...</p>\n                )\n            } else {\n               return(\n                   <p>{p}...</p>\n               )\n            }\n        } else {\n            return(\n                <p>{p}</p>\n            )\n        }\n    };\n\n    checkSurvivalKit = () => {\n        const user = this.context.user;\n        if(user.kits.includes(this.props.kit._id) || this.state.kit === this.props.kit._id){\n            return\n        } else {\n            AuthServices.favoriteKit(user._id, this.props.kit._id)\n                .then(() => this.setState({kit: this.props.kit._id}))\n                .catch((error) => console.log(error));\n        }\n    };\n\n\n    showMore = () => {\n        if (this.state.size === \"150px\") {\n            return(\n            <div onClick={this.openCard} className=\"learn-more-survival\">\n                <p>Show more</p>\n                <img id=\"arrow-down-kit\" src=\"https://res.cloudinary.com/dpt8pbi8n/image/upload/v1575324512/chevron-left_2_copy_2.svg\" alt=\"laern more arrow\" />\n            </div>\n            )\n        } else {\n            return(\n                <div onClick={this.openCard} className=\"learn-more-survival\">\n                <p>Show less</p>\n                <img style={{transform:\"rotate(-180deg)\"}}id=\"arrow-down-kit\" src=\"https://res.cloudinary.com/dpt8pbi8n/image/upload/v1575324512/chevron-left_2_copy_2.svg\" alt=\"laern more arrow\" />\n            </div>\n            )\n        }\n    };\n\n    checkSurvivalKit = () => {\n        const user = this.context.user;\n        if(user.kits.includes(this.props.kit._id) || this.state.kit === this.props.kit._id){\n            return\n        } else {\n            AuthServices.favoriteKit(user._id, this.props.kit._id)\n                .then(() => this.setState({kit: this.props.kit._id}))\n                .catch((error) => console.log(error));\n        }\n    };\n\n    addFavorite = () => {\n        const user = this.context.user;\n        const {products} = this.state\n\n        if (!this.context.islogged) {\n            return toastr.info('Log in to favorite');\n        } else {\n            if(user.products.includes(this.props.p._id || products.includes(this.props.p._id))){\n                return toastr.error(`Product is already favorited!`);\n            } else {\n                this.checkSurvivalKit();\n                AuthServices.favoriteProduct(user._id, this.props.p._id)\n                .then(() => {\n                    toastr.info(`Product was favorited!`);\n                    var joined = this.state.products.concat(this.props.p._id);\n                    this.setState({products: joined})\n                })\n                .catch((error) => console.log(error));\n            }\n            \n        }\n    };\n\n\n    render(){\n        const product = this.props.product;\n        const productMain = this.state.product.product;\n        const p = this.props.p;\n\t\t\t\t\n       if (productMain === undefined) {\n           return(<div>waiting on product survival kit</div>)\n       } else {\n        return(\n            <div style={{height:this.state.size}} className=\"survival-kit-card\">\n            <div className=\"survival-card-image-div\">\n                <img id=\"survival-image\" src={productMain.images[0]}/>\n            </div>\n            <div className=\"kit-description-div\">\n                <div className=\"kit-name-category\">\n                    <p id=\"product-name\"><b>{productMain.model}</b></p>\n                    <div className=\"kit-category-bubble\">\n                        <div>\n                            <img src=\"https://res.cloudinary.com/dpt8pbi8n/image/upload/v1575324090/heart-kit.svg\"alt=\"\" />\n                            <span>{productMain.category}</span>\n                        </div>\n                    </div>\n                </div>\n                <div className=\"kit-description-p\">\n                    {this.shrinkParagraph(p.comment)}\n                </div>\n                    {this.showMore()}\n            </div>\n            <div className=\"line-2\"></div>\n            <div className=\"survival-prize-div\">\n            <div className=\"survival-save-favorite\">\n                <img onClick={this.addFavorite} src=\"https://res.cloudinary.com/dpt8pbi8n/image/upload/v1575401603/Bookmark__Copy.svg\" alt=\"bookmark\" />\n            </div>\n                <p id=\"survival-prize\">${productMain.prize}</p>\n                <button className=\"survival-kit-add-to-cart\">Add to card</button>\n            </div>\n        </div>\n        )\n       }\n        \n    }\n}\n\nexport default ProductKit"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AACA;AACA;AAJA;AACA;AAFA;AAkBA;AACA;AAAA;AAAA;AACA;AACA;AArBA;AAuBA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AA1CA;AA4CA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AArDA;AAwDA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AAxEA;AA0EA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAEA;AACA;AACA;AAnFA;AAqFA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AAEA;AACA;AAzGA;AACA;AASA;AACA;AACA;AACA;AAAA;AAEA;AACA;AA4FA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAEA;AACA;AArJA;AACA;AADA;AACA;AAsJA;;;;A","sourceRoot":""}