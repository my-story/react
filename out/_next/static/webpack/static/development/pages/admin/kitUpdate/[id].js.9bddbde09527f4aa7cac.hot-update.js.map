{"version":3,"file":"static/webpack/static/development/pages/admin/kitUpdate/[id].js.9bddbde09527f4aa7cac.hot-update.js","sources":["webpack:///./pages/admin/kitUpdate/.js"],"sourcesContent":["import React, {Component} from 'react';\nimport KitServices from '../../../services/KitServices';\nimport UserContext from '../../../components/contexts/UserContext';\nimport { Input, Select } from 'antd';\nimport * as toastr from 'toastr';\nconst { TextArea } = Input;\n\n\nconst OPTIONS = [\"Addiction\", \"Sleep\", \"Spirituality\"];\n//Kit/create = route. Needs Authentication \nclass KitUpdate extends Component {\n    state = {\n        kit : {\n          title: \"\",\n          influencer: false,\n          products: [],\n          product: [],\n          comment: [],\n          tips: [],\n          header: [],\n          description: [],\n          techniques: [],\n          techniqueTitle: \"\",\n          techniqueHeader: [],\n          techniqueDescription: [],\n          category: \"\",\n          role: \"\"\n        },\n        selectedItems: [],\n        kitOld: {},\n        kitUpdate: false,\n        fixedArrays: false\n\n    }\n    static getInitialProps({ query: { id } }) {\n      return { id };\n    }\n\n    static contextType = UserContext;\n\n    componentDidMount = () => {\n      KitServices.getKitAdmin(this.props.id)\n        .then((kit) => this.setState({\n          kit: {\n            title: kit.title,\n            influencer: kit.influencer,\n            products: kit.products,\n            tips: kit.tips,\n            techniques: kit.techniques,\n            category: kit.category,\n            _id: kit._id,\n          }\n        }))\n           \n        .catch((err) => console.log(err))\n    }\n\n    onChange = (e) => {\n        let { kit } = this.state;\n        kit[e.target.name] = e.target.value;\n        this.setState( {kit} )\n      };\n        \n      handleChange = (selectedItems) => {\n        this.setState({\n          kit : {\n            ...this.state.kit,\n            category: selectedItems\n\n          }\n        })\n      };\n\n  \n      fixComments = () => {\n        const {kit} = this.state;\n        const {techniqueHeader, techniqueDescription, techniqueTitle} = this.state.kit;\n\n        let descriptions = techniqueDescription.split(\" , \");\n        let title = techniqueTitle;\n\n        let object = {\n          title,\n          technique : {\n            techniqueHeader,\n            descriptions\n          }\n        }\n\n        let array = this.state.kit.products;\n        let newArray = array.push(object);\n\n        if(object !== \"\") {\n          this.setState({products: newArray})\n        }\n        };    \n        \n      fixTips= () => {\n        const {kit} = this.state;\n        const {header, description} = this.state.kit;\n\n        let object = {\n          header, \n          description\n        }\n        \n        let array = this.state.kit.tips;\n        let newArray = array.push(object);\n\n        if(object !== \"\"){\n          this.setState({tips: newArray})\n          // console.log(object, this.state.kit.products)\n        }\n\n      };\n      \n      fixTechniques = () => {\n        const {kit} = this.state;\n        const {techniqueHeader, techniqueDescription, techniqueTitle} = this.state.kit;\n\n        let header = techniqueHeader.split(\" , \");\n        let description = techniqueDescription.split(\" , \");\n        let title = techniqueTitle;\n\n        let object = {\n          title,\n          header, \n          description\n        }\n\n        let array = this.state.kit.techniques;\n        let newArray = array.push(object);\n\n        if(object !== \"\") {\n          this.setState({techniques: newArray})\n          // console.log(object, this.state.kit.products)\n        }\n      };\n\n      onSubmit = () => {\n        let { kit } = this.state;\n        if (kit === false) {\n          toastr.error(\"Please complete all required fields\")\n          return\n        } else {\n          this.addBackend();\n          // console.log(\"ready for backend\")\n        }\n      };\n\n      addBackend = () => {\n        let {kit} = this.state;\n        const id = kit._id;\n\n        KitServices.updateKit({\n          kit: {\n            title: kit.title,\n            influencer: kit.influencer,\n            products: kit.products,\n            tips: kit.tips,\n            techniques: kit.techniques,\n            category: kit.category[0]\n          }\n        }, id)\n        // console.log(kit)\n          .then((k)=>{\n\n            // this.setState({\n            //   kit: kit,\n            //   kitUpdate:true\n            // })\n            console.log(k)\n          })\n          .catch((e)=>console.log(e))\n      };\n      \n      \n      \n    render() {\n      const { kit, kitOld, selectedItems } = this.state;\n      const filteredOptions = OPTIONS.filter(o => !selectedItems.includes(o));\n      console.log(this.state);\n\n      if (this.state.kit) {\n        return (\n          <div className=\"create-survival-kit-div\">\n               <Input name=\"title\" placeholder={kitOld.title}  onChange={this.onChange} />\n               <Input name=\"influencer\" placeholder={kit.influencer} onChange={this.onChange} />\n               <TextArea name=\"product\" rows={4} type=\"text\" placeholder=\"Add product ID\" onChange={this.onChange} />\n               <TextArea name=\"comment\" rows={4} type=\"text\" placeholder=\"Add product\" onChange={this.onChange} />\n               <button onClick={this.fixComments}> Add products </button>\n               <TextArea name=\"header\" rows={4} type=\"text\" placeholder=\"Add tip header\" onChange={this.onChange} />\n               <TextArea name=\"description\" rows={4} type=\"text\" placeholder=\"Add tip description\" onChange={this.onChange} />\n               <button onClick={this.fixTips}> Add tips </button>                 \n               <TextArea name=\"techniqueHeader\" rows={4} type=\"text\" placeholder=\"Add technique header\" onChange={this.onChange} />\n               <TextArea name=\"techniqueDescription\" rows={4} type=\"text\" placeholder=\"Add technique description\" onChange={this.onChange} />\n               <button onClick={this.fixTechniques}> Add techniques </button>                                  \n               <Input name=\"category\" placeholder=\"Please enter category\"  onChange={this.onChange} />\n              \n               <Select\n              mode=\"multiple\"\n              placeholder=\"This is the Category. ADMIN can create new categories\"\n              name=\"category\"\n              onChange={this.handleChange}\n              style={{ width: '100%' }}>\n              {filteredOptions.map(item => (\n                <Select.Option key={item} value={item}>\n                  {item}\n                </Select.Option>\n              ))}\n            </Select>\n\n               {/* <TextArea name=\"tips\" rows={4} type=\"text\" placeholder=\"Add Cloudinary images url separated by a space\" onChange={this.onChangeImage} /> */}\n               <button onClick={this.saveState}>Save State</button>                 \n               <button onClick={this.onSubmit}>Submit</button>\n          </div>\n      )\n      } else {\n        return(<div>...</div>)\n      }\n        \n    }\n    \n}\n\nexport default KitUpdate;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAGA;AACA;AACA;AAAA;AAAA;AACA;AADA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAdA;AAgBA;AACA;AACA;AACA;AApBA;AACA;AAFA;AA+BA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAPA;AADA;AAaA;AACA;AA9CA;AAgDA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AApDA;AAsDA;AACA;AAEA;AAFA;AADA;AAOA;AACA;AA9DA;AAiEA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAFA;AAFA;AAQA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAtFA;AAwFA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAFA;AAKA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AAEA;AACA;AAzGA;AA2GA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAHA;AAMA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AAhIA;AAkIA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AA3IA;AA6IA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AADA;AAAA;AAaA;AACA;AACA;AACA;AACA;AACA;AAEA;AApKA;AACA;AAuBA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AA6IA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AACA;AACA;AACA;AAAA;AAAA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AApNA;AACA;AADA;AACA;AAsNA;;;;A","sourceRoot":""}